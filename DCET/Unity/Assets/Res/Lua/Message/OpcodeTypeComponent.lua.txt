-- Generated by CSharp.lua Compiler
local System = System
local DCET = DCET
local DictUInt16Object = System.Dictionary(System.UInt16, System.Object)
local DoubleMap_2UInt16Type = DCET.DoubleMap_2(System.UInt16, System.Type)
local DCET
System.import(function (out)
  DCET = out.DCET
end)
System.namespace("DCET", function (namespace)
  namespace.class("OpcodeTypeComponentAwakeSystem", function (namespace)
    local Awake
    Awake = function (this, self)
      DCET.OpcodeTypeComponent.Instance = self
      self:Load()
    end
    return {
      base = function (out)
        return {
          out.DCET.AwakeSystem_1(out.DCET.OpcodeTypeComponent)
        }
      end,
      Awake = Awake,
      __metadata__ = function (out)
        return {
          class = { 0x6, out.DCET.ObjectSystemAttribute() }
        }
      end
    }
  end)

  namespace.class("OpcodeTypeComponentLoadSystem", function (namespace)
    local Load
    Load = function (this, self)
      self:Load()
    end
    return {
      base = function (out)
        return {
          out.DCET.LoadSystem_1(out.DCET.OpcodeTypeComponent)
        }
      end,
      Load = Load,
      __metadata__ = function (out)
        return {
          class = { 0x6, out.DCET.ObjectSystemAttribute() }
        }
      end
    }
  end)

  namespace.class("OpcodeTypeComponentDestroySystem", function (namespace)
    local Destroy
    Destroy = function (this, self)
      DCET.OpcodeTypeComponent.Instance = nil
    end
    return {
      base = function (out)
        return {
          out.DCET.DestroySystem_1(out.DCET.OpcodeTypeComponent)
        }
      end,
      Destroy = Destroy,
      __metadata__ = function (out)
        return {
          class = { 0x6, out.DCET.ObjectSystemAttribute() }
        }
      end
    }
  end)

  namespace.class("OpcodeTypeComponent", function (namespace)
    local Load, GetOpcode, GetType1, GetInstance, __ctor__
    __ctor__ = function (this)
      this.opcodeTypes = DoubleMap_2UInt16Type()
      this.typeMessages = DictUInt16Object()
      DCET.Entity.__ctor__(this)
    end
    Load = function (this)
      this.opcodeTypes:Clear()
      this.typeMessages:Clear()

      local types = DCET.Game.getEventSystem():GetTypes(System.typeof(DCET.MessageAttribute))
      for _, type in System.each(types) do
        local continue
        repeat
          local attrs = type:GetCustomAttributes(System.typeof(DCET.MessageAttribute), false)
          if #attrs == 0 then
            continue = true
            break
          end

          local messageAttribute = System.as(attrs:get(0), DCET.MessageAttribute)
          if messageAttribute == nil then
            continue = true
            break
          end

          this.opcodeTypes:Add(messageAttribute.Opcode, type)
          this.typeMessages:AddKeyValue(messageAttribute.Opcode, System.Activator.CreateInstance(type))
          continue = true
        until 1
        if not continue then
          break
        end
      end
    end
    GetOpcode = function (this, type)
      return this.opcodeTypes:GetKeyByValue(type)
    end
    GetType1 = function (this, opcode)
      return this.opcodeTypes:GetValueByKey(opcode)
    end
    GetInstance = function (this, opcode)
      return this.typeMessages:get(opcode)
    end
    return {
      base = function (out)
        return {
          out.DCET.Entity
        }
      end,
      Load = Load,
      GetOpcode = GetOpcode,
      GetType1 = GetType1,
      GetInstance = GetInstance,
      __ctor__ = __ctor__
    }
  end)
end)
