-- Generated by CSharp.lua Compiler
local System = System
local ET
System.import(function (out)
  ET = out.ET
end)
System.namespace("ET", function (namespace)
  namespace.enum("ChannelType", function ()
    return {
      Connect = 0,
      Accept = 1
    }
  end)

  namespace.class("AChannel", function (namespace)
    local Start, addErrorCallback, removeErrorCallback, addReadCallback, removeReadCallback, OnRead, OnError, Dispose, 
    __ctor__
    __ctor__ = function (this, service, channelType)
      this.ChannelType = ET.ChannelType.Connect
      ET.Entity.__ctor__(this)
      this.Id = ET.IdGenerater.GenerateId()
      this.ChannelType = channelType
      this.Service = service
    end
    Start = function (this)
    end
    addErrorCallback = function (this, value)
      this.errorCallback = this.errorCallback + value
    end
    removeErrorCallback = function (this, value)
      this.errorCallback = this.errorCallback - value
    end
    addReadCallback = function (this, value)
      this.readCallback = this.readCallback + value
    end
    removeReadCallback = function (this, value)
      this.readCallback = this.readCallback - value
    end
    OnRead = function (this, memoryStream)
      this.readCallback(memoryStream)
    end
    OnError = function (this, e)
      this.Error = e
      local default = this.errorCallback
      if default ~= nil then
        default(this, e)
      end
    end
    Dispose = function (this)
      if this:getIsDisposed() then
        return
      end

      ET.Entity.Dispose(this)

      this.Service:Remove(this.Id)
    end
    return {
      base = function (out)
        return {
          out.ET.Entity
        }
      end,
      Error = 0,
      Start = Start,
      addErrorCallback = addErrorCallback,
      removeErrorCallback = removeErrorCallback,
      addReadCallback = addReadCallback,
      removeReadCallback = removeReadCallback,
      OnRead = OnRead,
      OnError = OnError,
      Dispose = Dispose,
      __ctor__ = __ctor__
    }
  end)
end)
